(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[438],{5914:function(e,t,r){Promise.resolve().then(r.bind(r,6180))},3145:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var s=r(8461),a=r.n(s)},8461:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return i}});let s=r(7043),a=r(5346),n=r(5878),l=s._(r(5084));function i(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=n.Image},6180:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var s=r(7437),a=r(3145),n=r(7648);function l(e){var t,r,l,i;let{country:o}=e,c=(null===(t=o.capital)||void 0===t?void 0:t[0])||"—";return(0,s.jsxs)(n.default,{href:"/countries/".concat(o.cca3),className:"group block rounded-2xl overflow-hidden bg-white shadow hover:shadow-lg transition border border-gray-100",children:[(0,s.jsx)("div",{className:"relative h-40 w-full bg-gray-100",children:(0,s.jsx)(a.default,{src:(null===(r=o.flags)||void 0===r?void 0:r.svg)||(null===(l=o.flags)||void 0===l?void 0:l.png),alt:(null===(i=o.flags)||void 0===i?void 0:i.alt)||"".concat(o.name.common," flag"),fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),(0,s.jsxs)("div",{className:"p-4 space-y-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600",children:o.name.common}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"font-medium",children:"Region:"})," ",o.region]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"font-medium",children:"Capital:"})," ",c]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"font-medium",children:"Population:"})," ",o.population.toLocaleString()]})]})]})}var i=r(7160),o=r(6429),c=r(2265);let d=["Africa","Americas","Asia","Europe","Oceania","Antarctic"],u=e=>{let{size:t="lg",text:r="Loading..."}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin text-blue-500 ".concat("lg"===t?"h-8 w-8":"h-6 w-6"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("p",{className:"ml-2 text-gray-600 dark:text-gray-400 ".concat("lg"===t?"text-base":"text-sm"),children:r})]})},x=e=>{let{query:t,region:r,onReset:a}=e;return(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No countries found"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:t&&r?'No countries match "'.concat(t,'" in the ').concat(r," region."):t?'No countries match "'.concat(t,'".'):r?"No countries found in the ".concat(r," region."):"No countries match your search criteria."}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Try:"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-500 dark:text-gray-400 space-y-1",children:[(0,s.jsx)("li",{children:"• Checking your spelling"}),(0,s.jsx)("li",{children:"• Using fewer or different keywords"}),(0,s.jsx)("li",{children:"• Selecting a different region"})]})]}),(0,s.jsx)("button",{onClick:a,className:"mt-6 px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-xl transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Clear all filters"})]})};function g(){let e=(0,i.TL)(),{items:t,status:r,error:a}=(0,i.CG)(e=>e.countries),[n,g]=(0,c.useState)(""),[m,h]=(0,c.useState)(""),[f,p]=(0,c.useState)(12),[y,v]=(0,c.useState)(!1),b=(0,c.useRef)(null),j=(0,c.useMemo)(()=>{let e=n.trim().toLowerCase();return t.filter(t=>{let r=!e||t.name.common.toLowerCase().includes(e),s=!m||t.region===m;return r&&s})},[t,n,m]);(0,c.useEffect)(()=>{"idle"===r&&e((0,o.kX)())},[r,e]),(0,c.useEffect)(()=>{let e=new IntersectionObserver(e=>{e[0].isIntersecting&&!y&&f<j.length&&(v(!0),setTimeout(()=>{p(e=>e+12),v(!1)},500))},{threshold:.1});return b.current&&e.observe(b.current),()=>e.disconnect()},[j.length,y,f]),(0,c.useEffect)(()=>{p(12)},[n,m]);let w=(0,c.useMemo)(()=>j.slice(0,f),[j,f]),N=()=>{g(""),h(""),p(12)},k=n.trim()||m,C="succeeded"===r&&0===j.length&&k;return(0,s.jsx)("main",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-10 transition-colors duration-200",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 md:items-center md:justify-between mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:"Explore Countries"}),j.length>0&&"succeeded"===r&&(0,s.jsxs)("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm font-medium rounded-full",children:[j.length," ",1===j.length?"country":"countries"]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{value:n,onChange:e=>g(e.target.value),placeholder:"Search by country name...",className:"w-full sm:w-80 px-4 py-2 pl-10 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200"}),(0,s.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,s.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"w-full sm:w-56 px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200",children:[(0,s.jsx)("option",{value:"",children:"All regions"}),d.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),k&&(0,s.jsx)("button",{onClick:N,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors duration-200",title:"Clear filters",children:"Clear"})]})]}),"loading"===r&&!t.length&&(0,s.jsx)("div",{className:"py-12",children:(0,s.jsx)(u,{text:"Loading countries..."})}),"failed"===r&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("svg",{className:"mx-auto h-16 w-16 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.312 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-red-600 dark:text-red-400 mb-2",children:"Failed to load countries"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:a||"Something went wrong while loading the countries."}),(0,s.jsx)("button",{onClick:()=>e((0,o.kX)()),className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-xl transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Try again"})]}),C&&(0,s.jsx)(x,{query:n,region:m,onReset:N}),w.length>0&&(0,s.jsx)("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:w.map(e=>(0,s.jsx)(l,{country:e},e.cca3))}),w.length<j.length&&(0,s.jsx)("div",{ref:b,className:"h-10 mt-8",children:y&&(0,s.jsx)(u,{size:"sm",text:"Loading more countries..."})})]})})}},7160:function(e,t,r){"use strict";r.d(t,{CG:function(){return o},TL:function(){return i},h:function(){return l}});var s=r(1455),a=r(8575),n=r(6429);let l=(0,s.xC)({reducer:{countries:n.ZP},devTools:!1}),i=a.I0,o=a.v9},6429:function(e,t,r){"use strict";r.d(t,{ZP:function(){return i},kX:function(){return n},Kb:function(){return l}});let s=r(3464).Z.create({baseURL:"https://restcountries.com/v3.1",timeout:15e3});s.interceptors.request.use(e=>(console.log("Axios request:",{url:e.url,baseURL:e.baseURL,params:e.params,headers:e.headers}),e));var a=r(1455);let n=(0,a.hg)("countries/fetchAll",async()=>{let{data:e}=await s.get("/all?fields=".concat("name,flags,cca3,region,subregion,capital,population,currencies,languages,borders"));return e}),l=(0,a.hg)("countries/fetchByCode",async e=>{let{data:t}=await s.get("/alpha/".concat(e,"?fields=").concat("name,flags,cca3,region,subregion,capital,population,currencies,languages,borders"));return Array.isArray(t)?t[0]:t});var i=(0,a.oM)({name:"countries",initialState:{items:[],byCode:{},status:"idle",individualCountryStatus:{}},reducers:{},extraReducers:e=>{e.addCase(n.pending,e=>{e.status="loading",e.error=void 0}).addCase(n.fulfilled,(e,t)=>{for(let r of(e.status="succeeded",e.items=t.payload,t.payload))e.byCode[r.cca3]=r,e.individualCountryStatus[r.cca3]="succeeded"}).addCase(n.rejected,(e,t)=>{e.status="failed",e.error=t.error.message||"Failed to load countries"}).addCase(l.pending,(e,t)=>{let r=t.meta.arg;e.individualCountryStatus[r]="loading"}).addCase(l.fulfilled,(e,t)=>{let r=t.payload;e.byCode[r.cca3]=r,e.individualCountryStatus[r.cca3]="succeeded",e.items.find(e=>e.cca3===r.cca3)||e.items.push(r)}).addCase(l.rejected,(e,t)=>{let r=t.meta.arg;e.individualCountryStatus[r]="failed"})}}).reducer}},function(e){e.O(0,[610,878,971,117,744],function(){return e(e.s=5914)}),_N_E=e.O()}]);